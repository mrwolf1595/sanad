# ูุธุงู ุณูุฏุงุช ุงููุจุถ ูุงูุตุฑู - Sanad Receipts

ูุธุงู ุฅุฏุงุฑุฉ ุณูุฏุงุช ุงููุจุถ ูุงูุตุฑู ููุดุฑูุงุช ูุงููุคุณุณุงุช - Multi-tenant SaaS

## ุงููููุฒุงุช

- โ ูุธุงู Multi-tenant ูุนุฒูู ุชูุงูุงู ุจูู ุงูุดุฑูุงุช
- โ ุฅุฏุงุฑุฉ ุณูุฏุงุช ุงููุจุถ ูุงูุตุฑู
- โ **ุชูููุฏ PDF ุชููุงุฆู ูุน ุฏุนู ูุงูู ููุนุฑุจูุฉ** โญ
  - ูุนุงูุฌุฉ ุงุญุชุฑุงููุฉ ูููุตูุต ุงูุนุฑุจูุฉ (Arabic Reshaping)
  - ุฏุนู ุงููุตูุต ุงููุฎุชูุทุฉ (ุนุฑุจู + ุฃุฑูุงู)
  - ุฎุท Cairo ูุงุถุญ ูุณูู ุงููุฑุงุกุฉ
  - ุชุญููู ุชููุงุฆู ููุฃุฑูุงู ุงูุนุฑุจูุฉ
  - ุชูุณูู ุชููุงุฆู ููุชูุงุฑูุฎ
- โ ุชุญููู ุงููุจุงูุบ ุฅูู ูููุงุช ุจุงูุนุฑุจู
- โ ูุงุฌูุฉ RTL ูุงููุฉ ุจุงูุนุฑุจูุฉ
- โ ูุธุงู ูุตุงุฏูุฉ ุขูู
- โ ุฅุนุฏุงุฏ ุงูุดุฑูุฉ (Onboarding) ุฎุทูุฉ ุจุฎุทูุฉ
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช
- โ ุชุฎุฒูู ุขูู ูููููุงุช ูุงูุดุนุงุฑุงุช
- โ ุฅุญุตุงุฆูุงุช ูุชูุงุฑูุฑ

## ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### Frontend
- Next.js 15 (App Router)
- React 19
- TypeScript
- Tailwind CSS
- shadcn/ui
- TanStack Query
- React Hook Form
- Zod

### Backend & Database
- Next.js API Routes
- Supabase (PostgreSQL + Authentication + Storage)
- Row Level Security (RLS)

### PDF Generation
- pdf-lib
- @pdf-lib/fontkit
- arabic-persian-reshaper (ูุนุงูุฌุฉ ุงููุตูุต ุงูุนุฑุจูุฉ)
- ุฏุนู ุงูุฎุทูุท ุงูุนุฑุจูุฉ (Cairo, Amiri, Tajawal)
- ูุนุงูุฌุฉ ุฐููุฉ ูููุตูุต ุงููุฎุชูุทุฉ (ุนุฑุจู + ุฅูุฌููุฒู + ุฃุฑูุงู)

## ุงูุจุฏุก

### ุงููุชุทูุจุงุช

- Node.js 18 ุฃู ุฃุญุฏุซ
- npm ุฃู yarn
- ุญุณุงุจ Supabase

### 1. ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
npm install
```

### 2. ุฅุนุฏุงุฏ Supabase

1. ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ ูู [Supabase](https://supabase.com)

2. ูุณุฎ `.env.example` ุฅูู `.env.local`:
```bash
cp .env.example .env.local
```

3. ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู `.env.local`:
```env
NEXT_PUBLIC_SUPABASE_URL=your-project-url.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### 3. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ุงูุชุญ SQL Editor ูู Supabase Dashboard
2. ููุฐ ุงูุณูุฑูุจุช ุงูููุฌูุฏ ูู `supabase/migrations/001_initial_schema.sql`

### 4. ุฅุนุฏุงุฏ Storage Buckets

ูู Supabase Dashboard > Storageุ ุฃูุดุฆ Buckets ุงูุชุงููุฉ:

1. **logos** - ูุดุนุงุฑุงุช ุงูุดุฑูุงุช
   - Public: ูุนู
   - File size limit: 2 MB
   - Allowed MIME types: image/png, image/jpeg

2. **receipts** - ููููุงุช PDF ุงููููุฏุฉ
   - Public: ูุนู
   - File size limit: 5 MB
   - Allowed MIME types: application/pdf

### 5. ุชุดุบูู ุงููุดุฑูุน

```bash
npm run dev
```

ุงูุชุญ [http://localhost:3000](http://localhost:3000) ูู ุงููุชุตูุญ.

## ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ูููุดุฑูุน

```
sanad/
โโโ app/
โ   โโโ (auth)/                    # ุตูุญุงุช ุงููุตุงุฏูุฉ
โ   โ   โโโ login/                 # ุชุณุฌูู ุงูุฏุฎูู
โ   โ   โโโ signup/                # ุฅูุดุงุก ุญุณุงุจ
โ   โ   โโโ onboarding/            # ุฅุนุฏุงุฏ ุงูุดุฑูุฉ
โ   โโโ (dashboard)/               # ุตูุญุงุช Dashboard
โ   โ   โโโ layout.tsx             # Layout ูุน Navigation
โ   โ   โโโ page.tsx               # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โ   โ   โโโ receipts/              # ุฅุฏุงุฑุฉ ุงูุณูุฏุงุช
โ   โ   โโโ settings/              # ุงูุฅุนุฏุงุฏุงุช
โ   โ   โโโ users/                 # ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
โ   โโโ api/                       # API Routes
โ   โ   โโโ receipts/
โ   โ       โโโ generate-pdf/      # ุชูููุฏ PDF
โ   โโโ layout.tsx                 # Root Layout (RTL)
โโโ components/
โ   โโโ ui/                        # ููููุงุช shadcn/ui
โ   โโโ dashboard/                 # ููููุงุช Dashboard
โโโ lib/
โ   โโโ supabase/                  # ุฅุนุฏุงุฏุงุช Supabase
โ   โโโ pdf/                       # ูุธุงุฆู PDF
โ   โ   โโโ fillTemplate.ts        # ุชูููุฏ PDF
โ   โ   โโโ arabicNumbers.ts       # ุชุญููู ูุฃุฑูุงู ุนุฑุจูุฉ
โ   โโโ utils.ts
โโโ types/
โ   โโโ database.ts                # ุฃููุงุน TypeScript
โโโ supabase/
    โโโ migrations/                # SQL Migrations
```

## ุชุฏูู ุงูุนูู

### 1. ุงูุชุณุฌูู ูุงูุฅุนุฏุงุฏ ุงูุฃููู

1. ุงููุณุชุฎุฏู ูุณุฌู ุญุณุงุจ ุฌุฏูุฏ ูู `/signup`
2. ูุชู ุชูุฌููู ุฅูู `/onboarding` ูุฅุฏุฎุงู ุจูุงูุงุช ุงูุดุฑูุฉ (3 ุฎุทูุงุช)
3. ุจุนุฏ ุงูุญูุธุ ูุตุจุญ admin ููุชู ุชูุฌููู ุฅูู Dashboard

### 2. ุฅูุดุงุก ุณูุฏ ุฌุฏูุฏ

1. ูู Dashboard ุฃู `/dashboard/receipts`ุ ุงุถุบุท "ุณูุฏ ุฌุฏูุฏ"
2. ุงููุฃ ุจูุงูุงุช ุงูุณูุฏ (ุงูููุนุ ุงููุณุชููุ ุงููุจูุบุ ุงูุชุงุฑูุฎุ ุฅูุฎ)
3. ุนูุฏ ุงูุญูุธ:
   - ูุชู ุชูููุฏ ุฑูู ุณูุฏ ุชููุงุฆูุงู
   - ุญูุธ ุงูุณูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุชูููุฏ PDF ูุญูุธู ูู Storage
   - ุฑุจุท ุฑุงุจุท PDF ุจุงูุณูุฏ

### 3. ุนุฑุถ ูุชุญููู ุงูุณูุฏ

- ูู ูุงุฆูุฉ ุงูุณูุฏุงุชุ ุงุถุบุท "ุนุฑุถ"
- ูููู ุชุญููู ุฃู ุทุจุงุนุฉ PDF

## ุงูุฃูุงู

- **Row Level Security (RLS)**: ูู ุดุฑูุฉ ุชุตู ููุท ูุจูุงูุงุชูุง
- **Supabase Auth**: ูุตุงุฏูุฉ ุขููุฉ ูุน JWT
- **Server Components**: ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ุนูู ุงูุณูุฑูุฑ
- **Type Safety**: TypeScript ูู ูู ุงููุดุฑูุน

## ุฅุตูุงุญุงุช PDF (ุฏูุณูุจุฑ 2024) โญ

ุชู ุญู ุฌููุน ูุดุงูู ุนุฑุถ PDF ุจุดูู ููุงุฆู:

### โ ุงููุดุงูู ุงููุญูููุฉ:
1. **ุงููุตูุต ุงูุนุฑุจูุฉ ุงูููุทุนุฉ**: ุชู ุฅุถุงูุฉ ูุนุงูุฌุฉ ุงุญุชุฑุงููุฉ ุจุงุณุชุฎุฏุงู `arabic-persian-reshaper`
2. **ุงูุฃุฑูุงู ุงูุนุฑุจูุฉ**: ุชุญููู ุชููุงุฆู ูู (ู-ูฉ) ุฅูู (0-9)
3. **ุงููุตูุต ุงููุฎุชูุทุฉ**: ูุนุงูุฌุฉ ุฐููุฉ ูููุตูุต ุงูุชู ุชุญุชูู ุนูู ุนุฑุจู ูุฃุฑูุงู
4. **ุงูุชุงุฑูุฎ**: ุชูุณูู ุชููุงุฆู ุจุตูุบุฉ DD-MM-YYYY
5. **ุงูุฎุท**: ุชู ุงูุชุจุฏูู ูู Amiri ุฅูู Cairo ูููุถูุญ

### ๐ ูููุฒูุฏ ูู ุงูุชูุงุตูู:
ุฑุงุฌุน ููู [PDF_FIXES.md](./PDF_FIXES.md) ููุญุตูู ุนูู ุดุฑุญ ุชููู ููุตู

### ๐งช ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญุงุช:
```bash
node test-pdf-generation.js
```

## ุงูุชุฑููุงุช ุงููุณุชูุจููุฉ

- [ ] ุชุตุฏูุฑ ุชูุงุฑูุฑ Excel/CSV
- [ ] ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- [ ] ูุธุงู ุงูููุงููุงุช (Approvals)
- [ ] ุชูุงูู ูุน ุฃูุธูุฉ ูุญุงุณุจูุฉ
- [ ] ุชุทุจูู ููุจุงูู
- [ ] ูุฒุงููุฉ ูุน ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ
- [ ] ูุณุฎ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ
- [ ] ุชุนุฏุฏ ุงููุบุงุช

## ุงูุฏุนู

ููุฏุนู ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ูุฑุฌู ูุชุญ Issue ูู GitHub.

## ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช MIT License.

---

ุชู ุงูุชุทููุฑ ุจู โค๏ธ ุจุงุณุชุฎุฏุงู Next.js & Supabase
